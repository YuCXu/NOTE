# SpringIOC

一、什么是IOC

IOC（Inversion of Control ）：即控制反转。即将你设计好的对象交给容器控制。

几个问题：

**谁控制谁，控制什么？**：传统的java SE程序设计，我们直接在对象内部通过new进行创建对象，是程序主动去创建依赖对象；而IOC是有一个**专门的容器**来创建这些对象，即由IOC容器来控制对象的创建；谁控制谁？当然是IOC容器控制了对象；控制什么？主要控制了外部资源的获取（对象+文件等）。

**为何是反转，哪些方面反转了？**：正转的含义：传统的应用程序是由我们自己在对象中主动控制去直接获取依赖对象。反转的含义：容器来帮忙创建以及注入依赖对象。为什么是反转？因为由容器帮我们查找以及注入依赖对象，对象只是被动的接受依赖对象。哪些方面反转了？依赖对象的获取。

传统程序设计如图2-1，都是主动去创建相关对象然后再组合起来：

![1552294764858](C:\Users\YUCHEN~1\AppData\Local\Temp\1552294764858.png)

当有了IOC/DI的容器后，在客户端类中不再主动去创建这些对象了，如图2-2所示: 

![1552294916688](C:\Users\YUCHEN~1\AppData\Local\Temp\1552294916688.png)

二、IOC能做什么？

IOC不是一种技术，只是一种思想，一个重要的面向对象编程的法则，它能指导我们如何设计出松耦合、更优良的程序。传统的应用程序是由我们在类内部主动创建依赖对象，从而导致类与类之间的高耦合，难于测试；有了IOC容器后，把创建和查找依赖对象的控制权交给了容器，由容器进行注入组合对象，所以对象与对象之间是松耦合的，这样也方便测试，有利于功能复用，更重要的是使得程序的整个体系变得非常灵活。

其实IOC对编程带来的最大改变不是从代码上，而是从思想上，发生了"主从换位"的变化。应用程序原本是老大，要获取什么资源都是主动出击。但是在IOC/DI思想下，应用程序就变成被动的了，被动的等待IOC容器来创建并注入它所需的资源了。

三、IOC和DI

DI（Dependency Injection），即”依赖注入“，是组件之间依赖关系由容器在运行期决定，即容器动态的将某个依赖关系注入到组件之中。依赖注入的目的并非为软件系统带来更多的功能，而是为了提升组件重用的频率，并为系统搭建一个灵活、可扩展的平台。通过依赖注入的机制，我们只需要通过**简单的配置**，而无需任何代码就可以指定目标需要的资源，完成自身的业务逻辑，而不需要关心具体的资源来自何处，由谁实现。

理解DI的关键是下面几个问题

**谁依赖于谁？**：应用程序依赖于IOC容器；

**为什么需要依赖？**：应用程序需要IOC容器来提供对象需要的外部资源；

**谁注入谁？**：IOC容器注入应用程序的某个对象，应用程序依赖的对象；

**注入了什么？**：注入某个对象所需要的外部资源（包括对象、资源、常量数据）。

四、各个组件

![1552302253360](C:\Users\YUCHEN~1\AppData\Local\Temp\1552302253360.png)

 











